C51 COMPILER V8.02   GLCD                                                                  10/12/2013 00:01:31 PAGE 1   


C51 COMPILER V8.02, COMPILATION OF MODULE GLCD
OBJECT MODULE PLACED IN glcd.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE glcd.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg52.h>
   2          #include "glcd.h"
   3          
   4          void waiting(void){
   5   1              while(1){
   6   2                      RS=0;
   7   2                      RW=1;
   8   2                      En=0;
   9   2                      LCDdata=0xFF;
  10   2                      En=1;
  11   2                      if((LCDdata&busy)==0) break;
  12   2              }
  13   1      }
  14          
  15          void lcd_write_command(unsigned char command){
  16   1              waiting();
  17   1              RS=0;
  18   1              RW=0;
  19   1              En=1;
  20   1              LCDdata=command;
  21   1              En=0;
  22   1      }
  23          
  24          void lcd_write_data(unsigned char RWdata){
  25   1              waiting();
  26   1              RS=1;
  27   1              RW=0;
  28   1              En=1;
  29   1              LCDdata=RWdata;
  30   1              En=0;
  31   1      }
  32          
  33          void lcd_init(void){
  34   1              RET=1;
  35   1              lcd_write_command(0x30);
  36   1              lcd_write_command(0x30);
  37   1              lcd_write_command(0x0C);
  38   1              lcd_write_command(0x01);
  39   1              lcd_write_command(0x06);
  40   1      }
  41          
  42          void Display_String(unsigned char line,unsigned char *string){
  43   1      //It can display chinese
  44   1      //line is the number of line. There are total 4 lines
  45   1      //string must be like this: unsigned char code string_1[]={"Test"}
  46   1          unsigned char addr,i;
  47   1          if(line==1)
  48   1            addr=0x80;
  49   1          else if(line==2)
  50   1            addr=0x90;
  51   1          else if(line==3)
  52   1            addr=0x88;
  53   1          else if(line==4)
  54   1                      addr=0x98;
  55   1          lcd_write_command(addr);
C51 COMPILER V8.02   GLCD                                                                  10/12/2013 00:01:31 PAGE 2   

  56   1          for(i=0;i<16;i++)
  57   1          {
  58   2                      lcd_write_data(*string++);
  59   2              } 
  60   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    135    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
